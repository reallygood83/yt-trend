# Firebase ê·œì¹™ ë°°í¬ ê°€ì´ë“œ

## ğŸš€ Firebase Security Rules ë°°í¬í•˜ê¸°

### 1ï¸âƒ£ Firebase CLI ì„¤ì¹˜ (ìµœì´ˆ 1íšŒë§Œ)
```bash
npm install -g firebase-tools
```

### 2ï¸âƒ£ Firebase ë¡œê·¸ì¸
```bash
firebase login
```

### 3ï¸âƒ£ í”„ë¡œì íŠ¸ ì´ˆê¸°í™” (ìµœì´ˆ 1íšŒë§Œ)
```bash
cd /Users/moon/Desktop/yt-trend-main
firebase init firestore
```
- "Use an existing project" ì„ íƒ
- í”„ë¡œì íŠ¸ ì„ íƒ
- Firestore Rules íŒŒì¼: `firestore.rules` (ê¸°ë³¸ê°’)
- Firestore Indexes íŒŒì¼: `firestore.indexes.json` (ê¸°ë³¸ê°’)

### 4ï¸âƒ£ ê·œì¹™ ë°°í¬
```bash
firebase deploy --only firestore:rules
```

### 5ï¸âƒ£ ë°°í¬ í™•ì¸
Firebase Console â†’ Firestore Database â†’ Rules íƒ­ì—ì„œ í™•ì¸

---

## ğŸ‘¤ í”„ë¦¬ë¯¸ì—„ ì‚¬ìš©ì ì¶”ê°€í•˜ê¸°

### Firebase Consoleì—ì„œ ì§ì ‘ ì¶”ê°€ (ê°€ì¥ ê°„ë‹¨!)

1. **Firebase Console ì ‘ì†**
   - https://console.firebase.google.com
   - í”„ë¡œì íŠ¸ ì„ íƒ

2. **Firestore Database ì´ë™**
   - ì™¼ìª½ ë©”ë‰´ì—ì„œ "Firestore Database" í´ë¦­

3. **premiumUsers ì»¬ë ‰ì…˜ ìƒì„±** (ìµœì´ˆ 1íšŒë§Œ)
   - "ì»¬ë ‰ì…˜ ì‹œì‘" ë²„íŠ¼ í´ë¦­
   - ì»¬ë ‰ì…˜ ID: `premiumUsers`
   - ì²« ë²ˆì§¸ ë¬¸ì„œ ì¶”ê°€

4. **í”„ë¦¬ë¯¸ì—„ ì‚¬ìš©ì ë¬¸ì„œ ì¶”ê°€**
   - ë¬¸ì„œ ID: `[ì‚¬ìš©ì UID]` (Firebase Authenticationì—ì„œ í™•ì¸)
   - í•„ë“œ ì¶”ê°€:
     - `isPremium` (boolean): `true`
     - `grantedAt` (timestamp): ìë™
     - `grantedBy` (string): `admin` ë˜ëŠ” ê´€ë¦¬ì ì´ë¦„
     - `email` (string): ì‚¬ìš©ì ì´ë©”ì¼ (ì„ íƒì‚¬í•­)
     - `notes` (string): ë¶€ì—¬ ì‚¬ìœ  (ì„ íƒì‚¬í•­)

5. **ì €ì¥** í´ë¦­

### âœ… í™•ì¸ ë°©ë²•
ì‚¬ìš©ìê°€ ë¡œê·¸ì¸í•˜ë©´ `/api/user/check-premium?userId=[UID]` í˜¸ì¶œ ì‹œ
`{ isPremium: true }` ì‘ë‹µ í™•ì¸

---

## ğŸ” ë³´ì•ˆ ê·œì¹™ ì„¤ëª…

### learningNotes ì»¬ë ‰ì…˜
- **ì½ê¸°**: ë³¸ì¸ì´ ì‘ì„±í•œ ë…¸íŠ¸ ë˜ëŠ” shareIdê°€ ìˆëŠ” ë…¸íŠ¸ (ê³µê°œ ê³µìœ )
- **ìƒì„±**: ì¸ì¦ëœ ì‚¬ìš©ì, ë³¸ì¸ userIdë¡œë§Œ ìƒì„± ê°€ëŠ¥
- **ìˆ˜ì •**: ë³¸ì¸ì´ ì‘ì„±í•œ ë…¸íŠ¸ë§Œ ìˆ˜ì • ê°€ëŠ¥
- **ì‚­ì œ**: ë³¸ì¸ì´ ì‘ì„±í•œ ë…¸íŠ¸ë§Œ ì‚­ì œ ê°€ëŠ¥

### premiumUsers ì»¬ë ‰ì…˜
- **ì½ê¸°**: ì¸ì¦ëœ ì‚¬ìš©ìê°€ ìì‹ ì˜ í”„ë¦¬ë¯¸ì—„ ìƒíƒœë§Œ í™•ì¸ ê°€ëŠ¥
- **ì“°ê¸°**: Firebase Consoleì—ì„œë§Œ ê°€ëŠ¥ (í´ë¼ì´ì–¸íŠ¸ ì°¨ë‹¨)

---

## ğŸ§ª í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

### ì¼ë°˜ ì‚¬ìš©ì (3ê°œ ì œí•œ)
1. ë…¸íŠ¸ 3ê°œ ìƒì„± â†’ âœ… ì„±ê³µ
2. 4ë²ˆì§¸ ë…¸íŠ¸ ìƒì„± ì‹œë„ â†’ âŒ ì‚­ì œ ìš”êµ¬ ë©”ì‹œì§€
3. ê¸°ì¡´ ë…¸íŠ¸ ì‚­ì œ â†’ âœ… ì„±ê³µ
4. ìƒˆ ë…¸íŠ¸ ìƒì„± â†’ âœ… ì„±ê³µ

### í”„ë¦¬ë¯¸ì—„ ì‚¬ìš©ì (ë¬´ì œí•œ)
1. premiumUsers ì»¬ë ‰ì…˜ì— ì‚¬ìš©ì ì¶”ê°€
2. ë…¸íŠ¸ 4ê°œ ì´ìƒ ìƒì„± â†’ âœ… ëª¨ë‘ ì„±ê³µ
3. í”„ë¦¬ë¯¸ì—„ ë°°ì§€ í‘œì‹œ í™•ì¸ â†’ âœ… UIì— í‘œì‹œë¨

### ê³µìœ  ê¸°ëŠ¥
1. ë…¸íŠ¸ ì €ì¥ í›„ shareId í™•ì¸
2. `/notes/share/[shareId]` ì ‘ì† â†’ âœ… ë¡œê·¸ì¸ ì—†ì´ ì¡°íšŒ ê°€ëŠ¥
3. ê³µìœ  ë§í¬ ë³µì‚¬ â†’ âœ… ë‹¤ë¥¸ ë¸Œë¼ìš°ì €ì—ì„œ ì ‘ê·¼ ê°€ëŠ¥

---

## ğŸ“± Production ë°°í¬ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] Firebase ê·œì¹™ ë°°í¬ ì™„ë£Œ
- [ ] premiumUsers ì»¬ë ‰ì…˜ ìƒì„±
- [ ] í…ŒìŠ¤íŠ¸ í”„ë¦¬ë¯¸ì—„ ì‚¬ìš©ì ì¶”ê°€
- [ ] ì¼ë°˜ ì‚¬ìš©ì 3ê°œ ì œí•œ í…ŒìŠ¤íŠ¸
- [ ] í”„ë¦¬ë¯¸ì—„ ì‚¬ìš©ì ë¬´ì œí•œ í…ŒìŠ¤íŠ¸
- [ ] ê³µìœ  ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸ (ë¹„ë¡œê·¸ì¸ ì ‘ê·¼)
- [ ] Vercel ì¬ë°°í¬
